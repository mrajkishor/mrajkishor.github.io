# **Understanding `getStaticProps` in Next.js (Static Site Generation - SSG)**  

## ğŸ“Œ **Introduction**  
In modern web development, **performance and SEO** are crucial. Next.js provides **Static Site Generation (SSG)** using `getStaticProps` to pre-render pages **at build time**, ensuring fast load speeds and great SEO.  

In this blog, we will cover:  
âœ… What is **Static Site Generation (SSG)?**  
âœ… How does `getStaticProps` work?  
âœ… When to use `getStaticProps` vs `getServerSideProps` vs `getInitialProps`?  
âœ… Example use cases with API data fetching.  
âœ… Best practices for using SSG efficiently.  

Letâ€™s dive in! ğŸš€  

---

## ğŸ— **What is Static Site Generation (SSG)?**  

**Static Site Generation (SSG)** is a **pre-rendering** technique where pages are generated at **build time** instead of dynamically fetching data on each request.  

### ğŸ“Œ **How SSG Works in Next.js**  
1ï¸âƒ£ The page is **pre-built** during `next build`.  
2ï¸âƒ£ The generated HTML is **served directly from CDN**.  
3ï¸âƒ£ The page loads **instantly** without additional API requests.  

**Example Use Cases:**  
âœ” Blog posts (`/blog/[id]`)  
âœ” Marketing websites  
âœ” Product listing pages  
âœ” Documentation sites  

---

## ğŸš€ **How `getStaticProps` Works in Next.js?**  

`getStaticProps` is a special **async function** that fetches data **at build time** and passes it as props to the page.  

### ğŸ“„ **Basic Example (`pages/index.js`)**
```jsx
export async function getStaticProps() {
  return {
    props: {
      message: "Hello, Static Site!",
    },
  };
}

export default function Home({ message }) {
  return <h1>{message}</h1>;
}
```

ğŸ“Œ **Key Points:**  
âœ… Runs **only at build time** (`next build`)  
âœ… Prepares **static HTML & JSON** for the page  
âœ… Does **not run in the browser**  

---

## ğŸ“¦ **Fetching API Data with `getStaticProps`**  

Letâ€™s fetch posts from an API and pre-render them:

### ğŸ“„ **Fetching Data from an API (`pages/posts.js`)**
```jsx
export async function getStaticProps() {
  const res = await fetch("https://jsonplaceholder.typicode.com/posts");
  const posts = await res.json();

  return {
    props: { posts }, // Pass data as props
  };
}

export default function Posts({ posts }) {
  return (
    <div>
      <h1>Blog Posts</h1>
      <ul>
        {posts.slice(0, 5).map((post) => (
          <li key={post.id}>{post.title}</li>
        ))}
      </ul>
    </div>
  );
}
```

ğŸŸ¢ **How it Works:**  
âœ” `getStaticProps` fetches API data at **build time**  
âœ” The page is **pre-rendered** with the fetched data  
âœ” No API call occurs when the user visits the page  

---

## âš¡ **Using `getStaticProps` with Dynamic Routes**  

We can use `getStaticProps` with dynamic pages like `/posts/[id]`.  

### ğŸ“„ **Fetching Dynamic Post Data (`pages/posts/[id].js`)**  
```jsx
export async function getStaticPaths() {
  const res = await fetch("https://jsonplaceholder.typicode.com/posts");
  const posts = await res.json();

  // Pre-generate only first 5 posts
  const paths = posts.slice(0, 5).map((post) => ({
    params: { id: post.id.toString() },
  }));

  return { paths, fallback: false };
}

export async function getStaticProps({ params }) {
  const res = await fetch(`https://jsonplaceholder.typicode.com/posts/${params.id}`);
  const post = await res.json();

  return { props: { post } };
}

export default function Post({ post }) {
  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.body}</p>
    </div>
  );
}
```

ğŸ“Œ **Explanation:**  
1ï¸âƒ£ `getStaticPaths` **pre-generates** 5 posts at build time.  
2ï¸âƒ£ `getStaticProps` fetches **individual post data**.  
3ï¸âƒ£ Pages are statically generated and served instantly.  

---

## ğŸ”„ **Handling Dynamic Pages with `fallback` in `getStaticPaths`**  

If new posts are added **after deployment**, we need a **fallback strategy**.  

| `fallback` Mode | Behavior |
|----------------|-----------|
| `false` | Only pre-generated pages are accessible, others return 404. |
| `true` | Non-pre-rendered pages are generated **on-demand** (useful for large datasets). |
| `"blocking"` | Non-pre-rendered pages are **statically generated** before serving. |

ğŸ’¡ **Example with `fallback: true`**
```js
export async function getStaticPaths() {
  return { paths: [], fallback: true };
}
```
ğŸ”¹ If a user visits `/posts/100`, it will **generate and cache the page dynamically**.

---

## âš–ï¸ **Comparison: `getStaticProps` vs `getServerSideProps` vs `getInitialProps`**  

| Feature | `getStaticProps` (SSG) | `getServerSideProps` (SSR) | `getInitialProps` (Legacy) |
|---------|------------------------|----------------------------|----------------------------|
| Runs | Build Time | Request Time | Request Time |
| Performance | âš¡ Very Fast | ğŸ›‘ Slower | ğŸ›‘ Slower |
| Use Case | Blogs, Docs, Landing Pages | User Dashboards, Admin Panels | Avoid Using |
| SEO | âœ… Yes | âœ… Yes | âœ… Yes |

ğŸ“Œ **When to Use What?**  
âœ” Use `getStaticProps` for **fast, pre-generated content**  
âœ” Use `getServerSideProps` if data **must be real-time**  
âœ” **Avoid `getInitialProps`** (Deprecated in Next.js 13+)  

---

## ğŸš€ **Incremental Static Regeneration (ISR) with `revalidate`**  

By default, `getStaticProps` **only runs at build time**.  
But what if we want **automatic updates**?  

âœ… **ISR (Incremental Static Regeneration)** allows pages to be updated **without rebuilding the app**.  

### ğŸ“„ **Example with ISR (`revalidate`)**
```jsx
export async function getStaticProps() {
  const res = await fetch("https://jsonplaceholder.typicode.com/posts");
  const posts = await res.json();

  return {
    props: { posts },
    revalidate: 60, // Regenerate page every 60 seconds
  };
}
```

ğŸ“Œ **How ISR Works?**  
1ï¸âƒ£ Next.js **pre-renders the page** at build time.  
2ï¸âƒ£ If a request is made **after 60 seconds**, the page **regenerates**.  
3ï¸âƒ£ The old page is **replaced** with the updated version.  

âœ” Best for **blogs, news sites, e-commerce product pages**.  

---

## âœ… **Best Practices for Using `getStaticProps`**  

âœ” **Use SSG for pages that donâ€™t change frequently** (e.g., blogs, landing pages).  
âœ” **Always define `revalidate` for auto-updates** if data changes periodically.  
âœ” **Use `getStaticPaths` properly** to pre-generate dynamic routes.  
âœ” **Avoid fetching user-specific data** (Use `getServerSideProps` instead).  

---

## ğŸ¯ **Conclusion**  

`getStaticProps` is a **powerful data fetching method in Next.js** that enables **blazing-fast, SEO-friendly, pre-rendered pages**. It is best used for **static content** that doesnâ€™t need frequent updates, and when combined with ISR, it allows for **on-demand content regeneration**.



