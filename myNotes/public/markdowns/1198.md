

# ðŸ“˜ Chapter 6 â€“ SQL: Data Manipulation

---

## 1. Introduction to SQL

* **SQL (Structured Query Language)** is the standard language for relational databases.
* It is both a **DDL (Data Definition Language)** and **DML (Data Manipulation Language)**.
* Developed by IBM in the 1970s (System R project).
* Became ANSI standard in 1986, ISO standard in 1987.
* Widely supported by RDBMS: Oracle, MySQL, PostgreSQL, SQL Server, DB2.

**Objectives of SQL**

1. Provide a simple, high-level language for querying.
2. Support database definition, manipulation, and control.
3. Ensure portability across different DBMS products.

---

## 2. Writing SQL Commands

* SQL is **free-format**: not case sensitive (keywords often written in uppercase).
* **Semicolon (\;\)** marks the end of a statement.
* Whitespace is ignored except inside strings.

---

## 3. Data Manipulation Operations

SQL DML allows retrieval and modification of data.

---

### 3.1 Simple Queries â€“ `SELECT`

**Syntax:**

```sql
SELECT column_list
FROM table_name
WHERE condition;
```

* `SELECT *` â†’ retrieves all attributes.
* **Aliases** (`AS`) give temporary names.
* `DISTINCT` removes duplicates.

Example:

```sql
SELECT DISTINCT Dept FROM Student;
```

---

### 3.2 Sorting â€“ `ORDER BY`

* By default, ascending order (ASC).
* `DESC` for descending.

Example:

```sql
SELECT Name, Age
FROM Student
ORDER BY Age DESC;
```

---

### 3.3 Aggregate Functions

* **COUNT, SUM, AVG, MIN, MAX**.
* Applied to numeric or all attributes (except COUNT).

Example:

```sql
SELECT AVG(Salary), MAX(Salary)
FROM Employee;
```

---

### 3.4 Grouping â€“ `GROUP BY`

* Groups rows before applying aggregates.

Example:

```sql
SELECT Dept, COUNT(*)
FROM Student
GROUP BY Dept;
```

---

### 3.5 Subqueries

* A **query inside another query**.
* Used in WHERE, FROM, or SELECT clauses.
* Can return a single value (scalar) or multiple rows.

Example:

```sql
SELECT Name
FROM Employee
WHERE Salary > (SELECT AVG(Salary) FROM Employee);
```

---

### 3.6 `ANY` and `ALL`

* `ANY` â†’ condition true if it matches **at least one** value.
* `ALL` â†’ condition true if it matches **every** value.

Example:

```sql
SELECT Name
FROM Employee
WHERE Salary > ALL (SELECT Salary FROM Employee WHERE Dept = 'HR');
```

---

### 3.7 Multi-Table Queries (Joins)

* **INNER JOIN**:

```sql
SELECT e.Name, d.DeptName
FROM Employee e
JOIN Department d ON e.DeptNo = d.DeptNo;
```

* **NATURAL JOIN**: joins on same attribute names automatically.

* **SELF JOIN**: joins a table to itself (using aliases).

---

### 3.8 EXISTS and NOT EXISTS

* Used to check if a subquery returns rows.

Example:

```sql
SELECT Name
FROM Student s
WHERE EXISTS (SELECT * FROM Enroll e WHERE e.Roll = s.Roll);
```

---

### 3.9 Set Operations

* **UNION**: combines results (removes duplicates).
* **UNION ALL**: keeps duplicates.
* **INTERSECT**: common rows.
* **EXCEPT (MINUS in Oracle)**: rows in first but not in second.

---

### 3.10 Database Updates

* **INSERT**

```sql
INSERT INTO Student(Name, Age, Dept)
VALUES ('Ravi', 21, 'CS');
```

* **UPDATE**

```sql
UPDATE Student
SET Age = Age + 1
WHERE Dept = 'CS';
```

* **DELETE**

```sql
DELETE FROM Student
WHERE Age < 18;
```

*(Careful: `DELETE` without WHERE removes all rows!)*

---

## ðŸ”‘ Key Takeaways

1. SQL DML consists of **SELECT, INSERT, UPDATE, DELETE**.
2. `SELECT` is the most powerful operation â†’ supports filtering, joins, grouping, and subqueries.
3. Aggregates (`SUM, AVG, COUNT`) are often combined with `GROUP BY` and `HAVING`.
4. `ANY`, `ALL`, `EXISTS`, and `NOT EXISTS` help write advanced queries.
5. SQL supports **set operations** like UNION and INTERSECT (based on relational algebra).
6. Data updates (`INSERT, UPDATE, DELETE`) must be carefully constrained to avoid unintended data loss.

---

âœ… That completes **Chapter 6** in the same structured style.
