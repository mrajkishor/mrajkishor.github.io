

# 📘 Chapter 5 – Relational Algebra and Relational Calculus

---

## 1. The Relational Algebra

Relational algebra is a **procedural query language**:

* It tells **how to obtain the result** (step-by-step operations).
* Operations take **relations as input** and produce **relations as output**.
* Foundation of SQL query execution.

---

### 1.1 Unary Operations

#### (a) Selection (σ)

* Filters rows (tuples) based on a condition.
* **Notation**: σ<sub>condition</sub>(R)
* Example: σ<sub>Dept=‘CS’</sub>(STUDENT) → selects only CS students.

#### (b) Projection (π)

* Selects columns (attributes).
* **Notation**: π<sub>attributes</sub>(R)
* Example: π<sub>Name, Age</sub>(STUDENT).
* Removes duplicates by default.

#### (c) Rename (ρ)

* Changes relation or attribute names.
* Useful in queries involving self-joins.
* Example: ρ<sub>S1</sub>(STUDENT).

---

### 1.2 Set Operations

Since relations are sets, we can apply set theory.

* **Union (R ∪ S)** → tuples in R or S (must be union-compatible).
* **Intersection (R ∩ S)** → tuples in both R and S.
* **Difference (R – S)** → tuples in R but not in S.

---

### 1.3 Join Operations

Joins combine tuples from two relations.

* **Cartesian Product (R × S)**: all combinations of tuples (basis for joins).
* **Theta Join (R ⋈<sub>condition</sub> S)**: Cartesian product filtered by condition.
* **Equi-Join**: special case where condition is equality.
* **Natural Join (⋈)**: automatic join on attributes with the same name.
* **Outer Joins**:

  * Left Outer Join (R ⟕ S): keeps all tuples from R, fill nulls if no match.
  * Right Outer Join (R ⟖ S).
  * Full Outer Join (R ⟗ S).

---

### 1.4 Division Operation

* **R ÷ S** → returns tuples in R that are associated with **all tuples** in S.
* Example: Find students enrolled in **all courses offered**.

---

### 1.5 Aggregation and Grouping

* Group tuples and apply aggregate functions (COUNT, SUM, AVG, MIN, MAX).
* Notation: γ<sub>grouping, aggregation</sub>(R).
* Example: γ<sub>Dept, COUNT(\*)</sub>(STUDENT).

---

### 1.6 Summary of Relational Algebra Operations

* **Unary**: σ (select), π (project), ρ (rename).
* **Binary**: ∪, ∩, –, ×, ⋈, ÷.
* **Extended**: aggregation, grouping, outer joins.

---

## 2. The Relational Calculus

Relational calculus is **non-procedural**:

* It describes **what result we want**, not how to compute it.
* Two types: **Tuple Relational Calculus (TRC)** and **Domain Relational Calculus (DRC)**.
* Basis for **SQL** (non-procedural language).

---

### 2.1 Tuple Relational Calculus (TRC)

* Uses **tuple variables** (represent rows).

* General form:
  { t | P(t) }
  → Set of all tuples t such that predicate P(t) is true.

* Example: Find all students in CS:
  { t | t ∈ STUDENT ∧ t.Dept = 'CS' }

* Characteristics:

  * Declarative.
  * Uses logical connectives: ∧ (AND), ∨ (OR), ¬ (NOT), → (IMPLIES).
  * Uses quantifiers: ∃ (exists), ∀ (for all).

---

### 2.2 Domain Relational Calculus (DRC)

* Uses **domain variables** (attribute-level).

* General form:
  { \<x1, x2, …, xn> | P(x1, x2, …, xn) }
  → Returns tuples where predicate P holds.

* Example: Find names of CS students:
  { <n> | ∃ a (STUDENT(n, a, ‘CS’)) }

* Characteristics:

  * Closer to **predicate logic**.
  * Also uses ∃ and ∀ quantifiers.

---

### 2.3 Other Languages

* Relational algebra and calculus are **theoretical foundations**.
* Practical query languages (like **SQL**) are based on them.
* **QBE (Query by Example)**: graphical query language inspired by DRC.

---

## 🔑 Key Takeaways

1. **Relational Algebra** is procedural — defines *how* to get results using operations like selection, projection, join, union.
2. **Relational Calculus** is non-procedural — defines *what* we want using logic-based expressions.
3. TRC uses **tuple variables**, DRC uses **domain variables**.
4. Both are equivalent in expressive power (Codd’s theorem).
5. SQL combines concepts from **both algebra and calculus**.

---

✅ These notes fully cover **Chapter 5** in a detailed, structured way.


