

# Controlled Components

## ‚úÖ The Definitive Guide

---

### üîç What are Controlled Components?

In React, a **controlled component** is a form element (like an input, textarea, or select) **whose value is fully controlled by React state**.

> That means: React is the **source of truth**, not the DOM.

---

### üì¶ Example: A Controlled Input

```tsx
import { useState } from 'react';

function LoginForm() {
  const [email, setEmail] = useState('');

  return (
    <input
      type="email"
      value={email}
      onChange={(e) => setEmail(e.target.value)}
    />
  );
}
```

* `value` is bound to state
* `onChange` updates that state
* Result: The input is *controlled* by React

---

## üß† Why Controlled Components Matter 

| Benefit                  | Description                                                              |
| ------------------------ | ------------------------------------------------------------------------ |
| ‚úÖ React has full control | You can enforce formatting, validation, or side-effects on input changes |
| ‚úÖ Easy validation        | Run logic while user types (`onChange`) or on blur                       |
| ‚úÖ Declarative            | Input value reflects your component‚Äôs state ‚Äî no manual DOM manipulation |
| ‚úÖ Seamless integration   | Works great with Redux, Formik, Yup, debouncing, etc.                    |
| ‚úÖ Testable               | Since the state drives everything, it‚Äôs easy to assert behavior in tests |

---

## üß∞ Controlled vs Uncontrolled: Core Difference

| Feature         | Controlled Component                    | Uncontrolled Component               |
| --------------- | --------------------------------------- | ------------------------------------ |
| Source of truth | React state (`useState`, `redux`, etc.) | DOM (`ref.current.value`)            |
| Usage           | `value` + `onChange`                    | `defaultValue` + `ref`               |
| Validation      | Real-time, inside component             | Needs `useRef()` and manual handling |
| Suitability     | ‚úÖ Large apps, real-time forms           | ‚ö†Ô∏è Simple or one-off inputs only     |

---

## ‚ö†Ô∏è Common Mistakes to Avoid

| Mistake                                  | Why it‚Äôs a Problem                                   |
| ---------------------------------------- | ---------------------------------------------------- |
| Not setting `value`                      | React can‚Äôt control the input ‚Äî becomes uncontrolled |
| Forgetting `onChange`                    | Input freezes ‚Äî no updates to state                  |
| Mixing `defaultValue` with `value`       | Leads to warnings or unpredictable behavior          |
| Using `event.target.value` after `await` | Event is pooled ‚Äî `value` may be `null`              |

---

## ‚ú® Real-World Patterns in Controlled Components

### 1Ô∏è‚É£ Validation on Change

```tsx
const [email, setEmail] = useState('');
const [error, setError] = useState('');

function handleChange(e) {
  const value = e.target.value;
  setEmail(value);
  setError(validateEmail(value)); // live validation
}
```

---

### 2Ô∏è‚É£ Controlled Select Dropdown

```tsx
const [language, setLanguage] = useState('javascript');

<select value={language} onChange={(e) => setLanguage(e.target.value)}>
  <option value="javascript">JavaScript</option>
  <option value="python">Python</option>
</select>
```

---

### 3Ô∏è‚É£ Controlled Checkbox

```tsx
const [isAccepted, setAccepted] = useState(false);

<input
  type="checkbox"
  checked={isAccepted}
  onChange={(e) => setAccepted(e.target.checked)}
/>
```

---

### 4Ô∏è‚É£ Controlled Form Submission

```tsx
function handleSubmit(e) {
  e.preventDefault();
  if (email.length === 0) return alert("Email is required!");
  dispatch(submitLogin(email)); // handle login saga, thunk, etc.
}
```

---

## üî• Enterprise-Level Takeaways

* At scale, **controlled components** give you full traceability of user input
* All **React form libraries (Formik, React Hook Form)** work off this principle
* With Redux or Sagas, it‚Äôs easier to debug because state lives in JS ‚Äî not buried in the DOM
* You can implement features like:

  * Debounced search inputs
  * Real-time field validation
  * Autosave/drafts while user types

---

## ‚úÖ Summary

| Concept          | Controlled Component                            |
| ---------------- | ----------------------------------------------- |
| Defined by       | `value={state}` + `onChange={handler}`          |
| Source of truth  | React State (`useState`, `redux`, etc.)         |
| Benefits         | Predictable, testable, validation-friendly      |
| Use in real apps | Login, signup, search, forms, checkout, filters |
| Enterprise usage      | Always controlled for maintainability & UX      |

