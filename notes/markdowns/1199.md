

# ðŸ“˜ Chapter 7 â€“ SQL: Data Definition

---

## 1. The ISO SQL Data Types

SQL provides a standard set of **data types** for defining columns.

* **Character types**: `CHAR(n)`, `VARCHAR(n)`, `TEXT`
* **Numeric types**: `INT`, `SMALLINT`, `DECIMAL(p,d)`, `FLOAT`, `REAL`
* **Date & time**: `DATE`, `TIME`, `TIMESTAMP`
* **Boolean**: `BOOLEAN` (some DBMS store as 0/1)

**Identifiers**:

* Names for tables, columns, constraints.
* Must be unique in their scope.

---

## 2. Integrity Enhancement Features

Integrity constraints enforce **correctness of data**.

### 2.1 Required Data

* Columns can be declared `NOT NULL`.
* Ensures mandatory values.

### 2.2 Domain Constraints

* Restrict values within a range or set.
* Example:

```sql
CHECK (Age >= 18)
```

### 2.3 Entity Integrity

* Each table must have a **primary key**.
* Primary key attributes cannot be `NULL`.

### 2.4 Referential Integrity

* Ensures foreign keys match existing primary keys.
* Example:

```sql
FOREIGN KEY (DeptNo) REFERENCES Department(DeptNo)
```

### 2.5 General Constraints

* Additional business rules.
* Example:

```sql
CHECK (Salary > 0)
```

---

## 3. Data Definition Operations

SQL DDL creates, alters, and removes database objects.

### 3.1 Creating a Database

```sql
CREATE DATABASE University;
```

### 3.2 Creating a Table

```sql
CREATE TABLE Student (
   RollNo INT PRIMARY KEY,
   Name VARCHAR(50) NOT NULL,
   Age INT CHECK (Age >= 17),
   DeptNo INT,
   FOREIGN KEY (DeptNo) REFERENCES Department(DeptNo)
);
```

### 3.3 Changing a Table (ALTER)

```sql
ALTER TABLE Student
ADD COLUMN Email VARCHAR(100);
```

### 3.4 Removing a Table (DROP)

```sql
DROP TABLE Student;
```

### 3.5 Creating an Index

```sql
CREATE INDEX idx_dept ON Student(DeptNo);
```

### 3.6 Removing an Index

```sql
DROP INDEX idx_dept;
```

---

## 4. Views

Views are **virtual tables** derived from base tables.

### 4.1 Creating a View

```sql
CREATE VIEW CS_Students AS
SELECT Name, RollNo
FROM Student
WHERE DeptNo = 10;
```

### 4.2 Removing a View

```sql
DROP VIEW CS_Students;
```

### 4.3 View Resolution

* DBMS expands a view query into its base tables.

### 4.4 Restrictions on Views

* Complex views may not be **updatable** (joins, aggregates).

### 4.5 View Updatability

* Single-table views without aggregates are usually updatable.

### 4.6 WITH CHECK OPTION

* Ensures updates via the view donâ€™t violate its condition.

```sql
CREATE VIEW Adult_Students AS
SELECT * FROM Student
WHERE Age >= 18
WITH CHECK OPTION;
```

### 4.7 Advantages & Disadvantages

* Pros: security, simplicity, abstraction.
* Cons: performance overhead, not always updatable.

### 4.8 View Materialization

* Some systems **store results of views** (materialized views).
* Faster queries but require maintenance on updates.

---

## 5. Transactions (Introduction in DDL context)

* SQL supports **transactions**: a unit of work with ACID properties.
* Constraints may be checked immediately or deferred until transaction end.

---

## 6. Discretionary Access Control

SQL provides **GRANT** and **REVOKE** to manage user privileges.

* **Granting Privileges**:

```sql
GRANT SELECT, INSERT
ON Student
TO user1;
```

* **Revoking Privileges**:

```sql
REVOKE INSERT
ON Student
FROM user1;
```

---

## ðŸ”‘ Key Takeaways

1. SQL DDL defines schema elements (databases, tables, views, indexes).
2. **Constraints** (NOT NULL, CHECK, PK, FK) ensure data integrity.
3. Views provide **abstraction and security**, but may be limited in updates.
4. **Materialized views** improve performance at the cost of update complexity.
5. **GRANT/REVOKE** control user access to database objects.

---

âœ… That completes **Chapter 7** notes.

