
#  SQL Syntax and Semantics

---

## 🧩 Introduction

**SQL (Structured Query Language)** is the standard language used for querying and manipulating **relational databases**. Understanding SQL syntax and semantics is essential for solving query-based problems in the **GATE exam**, especially in **RDBMS and DBMS** sections.

SQL is broadly divided into:

* **DDL**: Data Definition Language
* **DML**: Data Manipulation Language
* **DQL**: Data Query Language
* **DCL**: Data Control Language
* **TCL**: Transaction Control Language

---

## 🧱 SQL Structure Overview

### 📌 SQL Query Skeleton

```sql
SELECT [DISTINCT] column_list
FROM table_list
[WHERE condition]
[GROUP BY column_list]
[HAVING group_condition]
[ORDER BY column [ASC|DESC]];
```

---

## ✅ 1. SQL Syntax: Components and Examples

---

### 🔹 A. Data Definition Language (DDL)

Used to define schema structures.

| Command    | Purpose                           | Example                                            |
| ---------- | --------------------------------- | -------------------------------------------------- |
| `CREATE`   | Creates tables, views             | `CREATE TABLE Student (id INT, name VARCHAR(50));` |
| `ALTER`    | Modifies structure                | `ALTER TABLE Student ADD age INT;`                 |
| `DROP`     | Deletes schema object             | `DROP TABLE Student;`                              |
| `TRUNCATE` | Removes all rows, resets identity | `TRUNCATE TABLE Student;`                          |

---

### 🔹 B. Data Manipulation Language (DML)

Used to **insert, update, delete** data.

| Command  | Purpose                | Example                                            |
| -------- | ---------------------- | -------------------------------------------------- |
| `INSERT` | Adds new data          | `INSERT INTO Student VALUES (1, 'Raj');`           |
| `UPDATE` | Modifies existing data | `UPDATE Student SET name = 'Kishor' WHERE id = 1;` |
| `DELETE` | Removes specific rows  | `DELETE FROM Student WHERE id = 1;`                |

---

### 🔹 C. Data Query Language (DQL)

| Command  | Purpose        | Example                                  |
| -------- | -------------- | ---------------------------------------- |
| `SELECT` | Retrieves data | `SELECT name FROM Student WHERE id = 1;` |

---

### 🔹 D. Data Control Language (DCL)

| Command  | Purpose             | Example                                |
| -------- | ------------------- | -------------------------------------- |
| `GRANT`  | Provides privileges | `GRANT SELECT ON Student TO user1;`    |
| `REVOKE` | Removes privileges  | `REVOKE SELECT ON Student FROM user1;` |

---

### 🔹 E. Transaction Control Language (TCL)

| Command     | Purpose            | Example          |
| ----------- | ------------------ | ---------------- |
| `COMMIT`    | Saves transaction  | `COMMIT;`        |
| `ROLLBACK`  | Undoes transaction | `ROLLBACK;`      |
| `SAVEPOINT` | Sets a savepoint   | `SAVEPOINT sp1;` |

---

## ✅ 2. SQL Semantics: How SQL Interprets Your Query

---

### 🔍 SELECT Semantics Execution Order

Even though we **write** SQL in this order:

```sql
SELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY;
```

The actual **execution order** is:

| Order | Clause     | Purpose            |
| ----- | ---------- | ------------------ |
| 1     | `FROM`     | Gets base data     |
| 2     | `WHERE`    | Filters row-wise   |
| 3     | `GROUP BY` | Groups rows        |
| 4     | `HAVING`   | Filters group-wise |
| 5     | `SELECT`   | Projects columns   |
| 6     | `ORDER BY` | Sorts output       |

---

### ✨ Example:

```sql
SELECT dept, AVG(salary)
FROM Employee
WHERE salary > 30000
GROUP BY dept
HAVING AVG(salary) > 40000
ORDER BY dept;
```

* `FROM`: Select Employee table
* `WHERE`: Keep salaries > 30,000
* `GROUP BY`: Group by department
* `HAVING`: Keep only depts with avg(salary) > 40,000
* `SELECT`: Show dept, avg salary
* `ORDER BY`: Sort by department name

---

### 🔹 WHERE vs HAVING

| Feature   | WHERE                 | HAVING                |
| --------- | --------------------- | --------------------- |
| Acts on   | **Rows**              | **Groups**            |
| Used with | `SELECT`, `UPDATE`    | `GROUP BY`            |
| Applies   | Before grouping       | After grouping        |
| Example   | `WHERE salary > 5000` | `HAVING COUNT(*) > 3` |

---

### 🔹 DISTINCT Keyword

Removes duplicate rows from the result.

```sql
SELECT DISTINCT department FROM Employee;
```

---

### 🔹 Aliases (`AS` keyword)

Renames columns or tables temporarily.

```sql
SELECT name AS student_name FROM Student;
```

---

### 🔹 NULL Handling

* **NULL ≠ 0 or empty**
* Comparisons with `NULL` use `IS NULL`, not `= NULL`

```sql
SELECT * FROM Employee WHERE manager_id IS NULL;
```

---

### 🔹 Aggregate Functions

Used with `GROUP BY`:

| Function  | Description |
| --------- | ----------- |
| `SUM()`   | Total       |
| `AVG()`   | Average     |
| `COUNT()` | Count rows  |
| `MIN()`   | Minimum     |
| `MAX()`   | Maximum     |

---

## ✅ 3. GATE Focus: Query Practice Patterns

---

### 📌 Join Example (Inner Join)

```sql
SELECT E.name, D.name
FROM Employee E
JOIN Department D ON E.dept_id = D.id;
```

---

### 📌 Subquery Example

```sql
SELECT name
FROM Student
WHERE marks > (SELECT AVG(marks) FROM Student);
```

---

### 📌 Set Operations

```sql
SELECT name FROM Students
UNION
SELECT name FROM Alumni;
```

Other operations:

* `INTERSECT`
* `EXCEPT` (or `MINUS` in some DBMS)

---

### 📌 Nested Queries in `FROM`

```sql
SELECT dept, AVG(sal)
FROM (SELECT * FROM Employee WHERE age > 30) AS SeniorEmp
GROUP BY dept;
```

---

## 🧠 Summary Table

| Clause      | Function                          |
| ----------- | --------------------------------- |
| `SELECT`    | Choose columns                    |
| `FROM`      | Choose tables                     |
| `WHERE`     | Row filtering                     |
| `GROUP BY`  | Group rows                        |
| `HAVING`    | Filter groups                     |
| `ORDER BY`  | Sort results                      |
| `DISTINCT`  | Eliminate duplicates              |
| `JOIN`      | Combine rows from multiple tables |
| `AGGREGATE` | SUM, COUNT, AVG, etc.             |

---

## 🧪 GATE-Style Practice Questions

**Q1.** What is the correct order of execution in SQL?

a) SELECT → FROM → WHERE
b) FROM → WHERE → GROUP BY → HAVING → SELECT → ORDER BY
c) SELECT → GROUP BY → WHERE
d) WHERE → FROM → SELECT

✅ **Answer**: b)

---

**Q2.** Which clause is used to filter groups in SQL?

a) WHERE
b) ORDER BY
c) GROUP BY
d) HAVING

✅ **Answer**: d)

---

## 🧾 Real-World Analogy

Think of SQL like ordering food:

* `FROM menu`: choose what to look at
* `WHERE type = veg`: filter options
* `GROUP BY cuisine`: group by category
* `HAVING avg_rating > 4.0`: filter only top-rated ones
* `SELECT name, price`: choose what to display
* `ORDER BY price DESC`: sort it

