
# ER to Relational Mapping

---

## üß© Introduction

The **ER model** helps design databases using entities, attributes, and relationships. But relational databases use **tables**, so we need to **map ER diagrams to relational schemas**.

This step is crucial in **logical database design**, and **GATE exams frequently test** this mapping process.

---

## üîÅ ER-to-Relational Mapping: Step-by-Step

The process involves converting:

1. **Entity Sets**
2. **Relationship Sets**
3. **Attributes (including composite & multivalued)**
4. **Weak Entity Sets**
5. **Specialization/Generalization (ISA)**
6. **Aggregation**

---

## ‚úÖ Step 1: Mapping Entity Sets

### Simple Entity:

* Create a **table** for each entity.
* Attributes become **columns**.
* Choose a **primary key**.

**ER Diagram**:

```
  +--------+
  | Student|
  +--------+
   RollNo, Name, Age
```

**Relational Table**:

```sql
Student(RollNo PRIMARY KEY, Name, Age)
```

---

### Composite Attributes:

* Flatten into **individual columns**.

```text
Name ‚Üí (FirstName, LastName)
```

Becomes:

```sql
Student(RollNo, FirstName, LastName, Age)
```

---

### Multivalued Attributes:

* Create a **separate table**.
* Include foreign key to the original entity.

**Example**: `Student ‚Üí {PhoneNumber}`

```sql
Student(RollNo PRIMARY KEY, Name)
Phone(RollNo, PhoneNumber)
PRIMARY KEY(RollNo, PhoneNumber)
```

---

## ‚úÖ Step 2: Mapping Relationship Sets

### Binary 1:1 Relationship

* Add foreign key to either table (prefer the one with **total participation**).
* May combine into one table if both participate totally.

**Example**:
`Person ‚Üî Passport` (1:1)

```sql
Person(SSN PRIMARY KEY, Name, PassportID UNIQUE)
Passport(PassportID PRIMARY KEY, IssueDate)
```

---

### Binary 1\:N Relationship

* Add foreign key to the **N-side** entity table.
* Foreign key references 1-side primary key.

**Example**:
`Department (1) ‚Üê Employee (N)`

```sql
Employee(EID PRIMARY KEY, Name, DeptID FOREIGN KEY REFERENCES Department)
```

---

### Binary M\:N Relationship

* Create a new **relation**.
* Contains **foreign keys** to both participating entities.
* Composite key = both foreign keys.

**Example**:
`Student ‚Üî Course`

```sql
Enrolled(RollNo, CourseID, Grade)
PRIMARY KEY(RollNo, CourseID)
FOREIGN KEY(RollNo) REFERENCES Student
FOREIGN KEY(CourseID) REFERENCES Course
```

---

## ‚úÖ Step 3: Mapping Attributes of Relationships

* Add attributes to the **relationship relation** created above.

**Example**:
`Employee ‚Üî Project` with attribute `Hours`

```sql
WorksOn(EID, PID, Hours)
PRIMARY KEY(EID, PID)
```

---

## ‚úÖ Step 4: Mapping Weak Entity Sets

* Create a table for the weak entity.
* Include the **partial key** and the **owner entity‚Äôs primary key**.
* Composite key = (owner key + partial key)
* Add a foreign key to the owner.

**Example**:
`Dependent(Name)` is a weak entity of `Employee(EID)`

```sql
Dependent(EID, DependentName, Age)
PRIMARY KEY(EID, DependentName)
FOREIGN KEY(EID) REFERENCES Employee
```

---

## ‚úÖ Step 5: Mapping Specialization / Generalization (ISA)

### 3 Mapping Strategies:

#### a) **Multiple Tables (Recommended for GATE)**

* One table for the **superclass**
* One table for each **subclass**
* Subclass table contains the PK of superclass as FK

```sql
Employee(EID PRIMARY KEY, Name)
Engineer(EID PRIMARY KEY, TechStack)
Manager(EID PRIMARY KEY, DeptName)
```

#### b) **Single Table with NULLs**

* Merge all into one table.
* Unused subclass attributes become NULL.

```sql
Employee(EID, Name, TechStack, DeptName)
```

#### c) **One Table per Subclass**

* No table for superclass.
* Redundant data in subclass tables.

‚ö†Ô∏è Not space-efficient; rarely used.

---

## ‚úÖ Step 6: Mapping Aggregation

* Treat the relationship set as an **entity**
* Then relate it using **foreign keys**

**Example**:
Auditor monitors the `WorksOn(Employee, Project)` relationship

```sql
WorksOn(EID, PID)
Monitors(AuditorID, EID, PID)
```

Monitors references the **composite PK** (EID, PID) of WorksOn.

---

## üß† Summary Table

| ER Component      | Relational Mapping                                 |
| ----------------- | -------------------------------------------------- |
| Entity            | Table with attributes + PK                         |
| Composite Attr    | Flatten into sub-attributes                        |
| Multivalued Attr  | New table with FK to main entity                   |
| 1:1 Relationship  | Add FK to one side (prefer total participant)      |
| 1\:N Relationship | FK on N side                                       |
| M\:N Relationship | New relation with FK to both sides                 |
| Weak Entity       | Table with FK to owner + partial key               |
| Specialization    | Option a) multiple tables per subclass (preferred) |
| Aggregation       | Treat relationship as entity, use composite FK     |

---

## üß™ GATE Practice Questions

**Q1.** Which of the following is true about mapping a weak entity set?

a) It can have its own primary key
b) It requires a separate table with only its partial key
c) It must include the primary key of the owner entity
d) It is merged with the strong entity set

‚úÖ **Answer**: c)

---

**Q2.** A multivalued attribute is mapped into:

a) Multiple columns in the same table
b) A separate relation
c) NULL-able attribute
d) A foreign key only

‚úÖ **Answer**: b)

---

## üßæ Real-Life Analogy

* Think of an **ER diagram** like a high-level resume.
* Mapping to relational schema is like converting it into a structured **Excel sheet** with tables for easy querying and storage.


