
# üìå Route 53 Routing Policies

## 1. What are Routing Policies?
- Routing policies define **how Route 53 responds to DNS queries**.  
- Important to note:  
  - It‚Äôs **not the same as load balancer routing**.  
  - DNS does not route traffic itself; it only **responds with DNSRoute 53 Routing Policies records** (like IP addresses).  
  - The **client/browser** decides where to send traffic after resolving the DNS query.  

---

## 2. Types of Routing Policies in Route 53

### üîπ a) **Simple Routing Policy**

![alt text](image-220.png)


- Default routing type.  
- Typically routes to **a single resource** (one IP, one load balancer, etc.).  
- You can specify **multiple values** in one record:  
  - If multiple are returned, the **client randomly chooses one**.  
- If using **Alias**, can only specify **one AWS resource**.  
- **Limitations:**  
  - Cannot be associated with health checks.  
  - No failover or routing intelligence.  

**Example:**  
`foo.example.com` ‚Üí returns `A 11.22.33.44`  
If multiple records:  
`foo.example.com` ‚Üí returns `A 11.22.33.44`, `A 55.66.77.88`, `A 99.11.22.33` ‚Üí client randomly picks one.  

---

### üîπ b) **Weighted Routing Policy**

![alt text](image-221.png)

- Allows splitting traffic **by percentage** between multiple resources.  
- Each record is assigned a **weight** (e.g., 70, 20, 10).  
- Traffic distribution =  
  ```
  Traffic % = (Weight for a specific record) / (Sum of all weights)
  ```
- Weights **don‚Äôt need to sum up to 100** (Route 53 calculates percentages automatically).  
- Can be associated with **Health Checks**.  
- **Use cases:**  
  - Load balancing between multiple resources.  
  - Testing new application versions (e.g., 90% to v1, 10% to v2).  
  - Gradual migration of users.  
- Setting weight to **0** stops sending traffic to that record.  

---

### üîπ c) **Latency-based Routing Policy**

![alt text](image-222.png)

- Directs queries to the resource with the **lowest latency for the client‚Äôs location**.  
- Latency is calculated based on **traffic between users and AWS regions**.  
- Example:  
  - A user in Germany may be routed to the **US-East-1 ALB** if it provides lower latency than EU-West-1 at that moment.  
- Can be associated with **Health Checks** ‚Üí allows failover to a different region.  
- **Use cases:**  
  - Global applications where minimizing latency is critical (e.g., gaming, video streaming, APIs).  

---

## 3. Key Takeaways
- **Simple Policy** ‚Üí One or many IPs, no routing intelligence.  
- **Weighted Policy** ‚Üí Control percentage-based traffic distribution (good for testing, migrations).  
- **Latency-based Policy** ‚Üí Optimizes user experience by reducing latency across regions.  

---



# üìå Route 53 Routing Policies ‚Äì Comparison Table

| **Policy**                           | **How it Works**                                                                                  | **Supports Health Checks?** | **Use Cases**                                               | **Example**                                                         |
| ------------------------------------ | ------------------------------------------------------------------------------------------------- | --------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------------- |
| **Simple**                           | Returns one record (or multiple, client picks randomly).                                          | ‚ùå No                        | Small apps, simple DNS resolution without routing logic.    | `app.example.com ‚Üí 11.22.33.44`                                     |
| **Weighted**                         | Splits traffic based on percentage (weights assigned).                                            | ‚úÖ Yes                       | Canary deployments, blue/green testing, gradual migration.  | 70% ‚Üí ALB-1, 30% ‚Üí ALB-2                                            |
| **Failover**                         | Routes traffic to primary resource; switches to secondary if health check fails.                  | ‚úÖ Yes                       | Disaster recovery, high availability setups.                | Primary = US-ALB, Secondary = EU-ALB                                |
| **Latency-based**                    | Routes to the AWS region with the lowest latency for the client.                                  | ‚úÖ Yes                       | Global apps needing best performance (gaming, video, APIs). | Germany user ‚Üí US-East if lowest latency                            |
| **Geolocation**                      | Routes based on user‚Äôs geographic location (continent, country, or state).                        | ‚úÖ Yes                       | Regional content delivery, compliance/legal restrictions.   | EU users ‚Üí EU servers, US users ‚Üí US servers                        |
| **Geoproximity** (Traffic Flow only) | Routes based on geographic proximity of clients to resources. Bias can be added to shift traffic. | ‚úÖ Yes                       | Direct more/less traffic to specific regions.               | 80% users near Asia sent to Singapore region, 20% diverted to Tokyo |
| **Multi-Value Answer**               | Returns multiple healthy records, client picks one randomly. Works like basic load balancing.     | ‚úÖ Yes                       | Lightweight DNS-based load balancing without ELB.           | `api.example.com ‚Üí [3 healthy EC2 IPs]`                             |

---

## ‚úÖ Quick Decision Guide

* **Simple** ‚Üí Basic DNS.
* **Weighted** ‚Üí A/B testing, gradual rollouts.
* **Failover** ‚Üí Disaster recovery, HA.
* **Latency** ‚Üí Best performance globally.
* **Geolocation/Geoproximity** ‚Üí Regional policies, compliance, targeted traffic.
* **Multi-Value** ‚Üí Cheap DNS-based load balancing.

