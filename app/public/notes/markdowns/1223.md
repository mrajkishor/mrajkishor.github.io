
# üî∑ Common Interview Questions ‚Äì Stored Procedures & Functions

## 1. Creating and Calling Stored Procedures

* What is a stored procedure in MySQL and why do we use it?
* How do you create and call a stored procedure?
* What are the advantages and disadvantages of stored procedures?
* Can a stored procedure return multiple result sets? How?
* How do you execute a stored procedure inside another procedure?

---

## 2. Creating and Using User-Defined Functions (UDFs)

* What is a User-Defined Function (UDF) in MySQL?
* How are UDFs different from stored procedures?
* What are the restrictions of UDFs in MySQL?
* Can UDFs be used inside SELECT, WHERE, and GROUP BY clauses?
* What does `DETERMINISTIC` mean when creating a function? Why is it important?

---

## 3. IN, OUT, INOUT Parameters

* What is the difference between IN, OUT, and INOUT parameters?
* Can a stored procedure have multiple OUT parameters? Give an example.
* When would you use INOUT over separate IN and OUT parameters?
* What is the default parameter mode if not specified in MySQL procedures?
* How do you retrieve OUT parameter values when calling a stored procedure?

---

## 4. Error Handling in Procedures

* How do you handle runtime errors in MySQL stored procedures?
* What is the purpose of `DECLARE ... HANDLER` in procedures?
* Difference between `CONTINUE` and `EXIT` handlers?
* How do you handle `NOT FOUND` errors in cursors within procedures?
* Can stored procedures raise custom errors in MySQL? If yes, how?

---

## 5. Procedural Constructs (DECLARE, IF, WHILE, LOOP)

* What is the role of `DECLARE` in MySQL stored programs?
* How do you use IF...ELSE logic inside a stored procedure?
* Difference between WHILE and LOOP constructs in MySQL?
* How does `LEAVE` and `ITERATE` work inside loops?
* What is the correct order of declaration (DECLARE, HANDLER, CURSOR) inside a procedure?

---


## Answers 


# üî∑ 1. Creating and Calling Stored Procedures ‚Äì Detailed Q\&A

---

### **Q1: What is a stored procedure in MySQL and why do we use it?**

**Answer:**
A **stored procedure** is a precompiled block of SQL statements that is stored in the database and can be executed repeatedly by calling its name.

We use stored procedures because:

1. **Encapsulation & Reusability** ‚Äì Business logic can be written once and reused across multiple applications.
2. **Performance** ‚Äì Stored procedures are parsed and compiled by the server only once; subsequent calls execute faster.
3. **Security** ‚Äì Access can be restricted to procedures rather than underlying tables (principle of least privilege).
4. **Maintainability** ‚Äì Centralized logic makes bug fixes or enhancements easier.
5. **Reduced Network Traffic** ‚Äì Multiple SQL statements execute in one procedure call, minimizing round trips between application and database.

üìå *Example use case:* A banking system may use a stored procedure `TransferFunds` that validates balances, updates two accounts, and logs the transaction ‚Äî all in one atomic operation.

---

### **Q2: How do you create and call a stored procedure?**

**Answer:**
We use the `CREATE PROCEDURE` statement to define a procedure, and `CALL` to invoke it.

**Example:**

```sql
DELIMITER //

CREATE PROCEDURE GetEmployeesByDept(IN dept_id INT)
BEGIN
   SELECT emp_id, emp_name, salary
   FROM employees
   WHERE department_id = dept_id;
END //

DELIMITER ;

-- Calling the procedure
CALL GetEmployeesByDept(10);
```

üìå Key points:

* Use `DELIMITER` to avoid confusion between `;` inside procedure body and statement termination.
* Parameters can be `IN`, `OUT`, or `INOUT`.
* Procedures are stored in the **`mysql.proc`** metadata table.

---

### **Q3: What are the advantages and disadvantages of stored procedures?**

**Answer:**

‚úÖ **Advantages:**

* **Performance Boost** ‚Äì Precompiled execution plan reduces query compilation overhead.
* **Reduced Traffic** ‚Äì One call can execute multiple SQL statements.
* **Security** ‚Äì Users can be restricted to execute procedures without direct table access.
* **Consistency** ‚Äì Business logic is centralized inside the DB.

‚ùå **Disadvantages:**

* **Tight Coupling** ‚Äì Logic tied to the database makes migrations harder (vendor lock-in).
* **Harder Version Control** ‚Äì Tracking procedure changes in Git is less straightforward than application code.
* **Maintainability Issues** ‚Äì Large procedures can become complex and difficult to debug.
* **Resource Usage** ‚Äì Overuse may push too much computation onto the DB server, affecting scalability.

üìå *Interview Tip:* Highlight that in **modern microservices architectures**, stored procedures are used **sparingly**, typically for heavy transactional consistency, but application-level logic often lives outside.

---

### **Q4: Can a stored procedure return multiple result sets? How?**

**Answer:**
Yes. A stored procedure can contain **multiple SELECT statements**, each returning a separate result set.

**Example:**

```sql
DELIMITER //

CREATE PROCEDURE GetDeptAndEmployees(IN dept_id INT)
BEGIN
   -- First result set: Department info
   SELECT dept_id, dept_name
   FROM departments
   WHERE dept_id = dept_id;

   -- Second result set: Employees in that dept
   SELECT emp_id, emp_name, salary
   FROM employees
   WHERE department_id = dept_id;
END //

DELIMITER ;

CALL GetDeptAndEmployees(10);
```

üìå When executed, the caller (e.g., Java JDBC, Python connector) will receive **two result sets** sequentially.

* In JDBC, you handle it using `getMoreResults()`.
* In MySQL CLI, both result sets will be displayed.

---

### **Q5: How do you execute a stored procedure inside another procedure?**

**Answer:**
We can nest procedure calls by using the `CALL` statement inside another procedure.

**Example:**

```sql
DELIMITER //

CREATE PROCEDURE GetEmployeeSummary(IN dept_id INT)
BEGIN
   -- Call another procedure for employees
   CALL GetEmployeesByDept(dept_id);

   -- Call another procedure for department info
   CALL GetDepartmentBudget(dept_id);
END //

DELIMITER ;

CALL GetEmployeeSummary(10);
```

üìå Key Notes:

* You can call multiple procedures inside one "wrapper" procedure.
* Useful for **modular design**: break down large logic into smaller units.
* Must handle **transaction scope** carefully ‚Äî a nested call failure may affect the parent procedure.


