
# ðŸ”· IN, OUT, and INOUT Parameters in MySQL Stored Procedures

## 1. Concept

MySQL stored procedures support **parameters** to exchange values between the caller (application or SQL client) and the procedure itself. Parameters define how data flows:

* **`IN` parameter** â†’ Value flows **into** the procedure (read-only inside).
* **`OUT` parameter** â†’ Value flows **out** from the procedure to the caller.
* **`INOUT` parameter** â†’ Value flows both ways: supplied by caller, modified inside procedure, and returned back.

Understanding and using these correctly is crucial in **large-scale systems** (like Enterprise architectures) because procedures often serve as an API boundary between the **database layer** and the **application/service layer**.

---

## 2. IN Parameter

* **Definition**: Default type if no keyword is specified.
* **Behavior**: Caller provides a value â†’ procedure uses it inside. Cannot be changed for caller.
* **Analogy**: Function arguments in JavaScript or Java passed by value.

### Example

```sql
DELIMITER //
CREATE PROCEDURE GetEmployeeById(IN empId INT)
BEGIN
    SELECT name, salary
    FROM employees
    WHERE emp_id = empId;
END //
DELIMITER ;

-- Call
CALL GetEmployeeById(101);
```

ðŸ“Œ **Use Case**: Input filters, such as searching employees, filtering reports, or parameterizing analytics queries.

---

## 3. OUT Parameter

* **Definition**: Procedure assigns values to `OUT` parameters, and those are returned to the caller.
* **Behavior**: Caller must pass a variable (e.g., `@var`). Inside procedure, initial caller value is ignored.
* **Analogy**: Return by reference in C++ or mutable arguments in Python.

### Example

```sql
DELIMITER //
CREATE PROCEDURE GetSalaryById(
    IN empId INT,
    OUT empSalary DECIMAL(10,2)
)
BEGIN
    SELECT salary INTO empSalary
    FROM employees
    WHERE emp_id = empId;
END //
DELIMITER ;

-- Call
CALL GetSalaryById(101, @salary);
SELECT @salary;   -- Returns salary of employee 101
```

ðŸ“Œ **Use Case**: Procedures that return computed or looked-up values (salary, total sales, counts).

---

## 4. INOUT Parameter

* **Definition**: Combines `IN` and `OUT`. Caller provides an initial value; procedure can modify it; updated value is passed back.
* **Behavior**: Useful for cumulative operations, iterative calculations, or variable transformation.
* **Analogy**: Pass by reference with mutation allowed.

### Example

```sql
DELIMITER //
CREATE PROCEDURE AdjustSalary(
    INOUT empSalary DECIMAL(10,2),
    IN bonus DECIMAL(10,2)
)
BEGIN
    SET empSalary = empSalary + bonus;
END //
DELIMITER ;

-- Call
SET @currentSalary = 50000;
CALL AdjustSalary(@currentSalary, 5000);
SELECT @currentSalary;   -- Output: 55000
```

ðŸ“Œ **Use Case**: Running totals, percentage adjustments, modifying values that persist outside procedure.

---

## 5. Real-World Usage in Enterprise-Scale Systems

* **IN**

  * Search filters (`date range`, `region`, `userId`).
  * Input constraints for data pipelines.

* **OUT**

  * Returning system-generated values (e.g., order ID, tracking token, session keys).
  * Fetching metadata or statistics (count of processed records, job status).

* **INOUT**

  * Iterative batch processing where running state must be updated and returned.
  * Financial systems updating balances and returning new values.
  * Distributed workflows passing and modifying cumulative counters.

---

## 6. Best Practices

1. **Clarity over Cleverness**

   * Prefer `IN` where possible.
   * Use `OUT`/`INOUT` only when multiple return values are required.

2. **Minimal OUT Parameters**

   * Donâ€™t overload procedures with too many OUTs â†’ hard to maintain.

3. **Idempotency**

   * Ensure OUT/INOUT logic is deterministic and repeatable (important for retries in distributed systems).

4. **Type Safety**

   * Always declare explicit parameter types (avoid implicit conversions).

5. **Error Handling**

   * Combine with `DECLARE EXIT HANDLER FOR SQLEXCEPTION` to prevent returning corrupt values on failure.

---

## 7. Common Interview Questions

1. **Difference between IN, OUT, and INOUT parameters in MySQL stored procedures?**
   â†’ IN: only input; OUT: only output; INOUT: both input and output.

2. **Can OUT parameters be read before assignment?**
   â†’ No. They are NULL until assigned inside procedure.

3. **Whatâ€™s a real-world example of INOUT usage?**
   â†’ Updating a userâ€™s account balance: caller passes current balance, procedure adds transaction amount, and updated balance is returned.

4. **Why might INOUT parameters be discouraged in modern microservices?**
   â†’ They reduce clarity; applications prefer explicit single return sets (rows/JSON). But still valuable in **legacy enterprise DB logic** and **performance-critical ETL jobs**.




